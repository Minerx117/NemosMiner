<!--#include file="/parts/head.html" -->
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h2 data-navbaractive="navswitchinglog">Switching Log</h2>
          </div>
          <div class="alert alert-info" role="alert">Lists the executed miners and the command lines used (last 1000 entries).</div>
          <div id="toolbar">
            <button id="btn-clear-log" class="btn btn-warning">Clear Switching Log</button>
          </div>
          <table id="switchinglog" class="table"
            data-toolbar="#toolbar"
            data-click-to-select="true"
            data-cache="true"
            data-toggle="table"
            data-icons="icons"
            data-show-button-text="true"
            data-filter-control="true"
            data-disable-control-when-search="true"
            data-show-columns="true"
            data-show-toggle="true"
            data-show-refresh="true"
            data-detail-view="true"
            data-auto-refresh="true"
            data-auto-refresh-status="true"
            data-detail-formatter="detailFormatter"
            data-response-handler="formatData"
            data-url="/switchinglog"
            >
            <thead>
              <tr>
                <th data-switchable="false" data-field="tAction" data-class="hidden"></th>
                <th class="align-top" data-field="DateTime" data-sortable="true" data-filter-control="input" data-filter-strict-search="false" data-formatter="formatDate">Date & Time</th>
                <th class="align-top" data-field="Action" data-sortable="true" data-filter-control="select" data-filter-strict-search="false">Action</th>
                <th class="align-top" data-field="Name" data-sortable="true" data-filter-control="select" data-filter-strict-search="false">Name</th>
                <th class="align-top" data-field="Pools" data-sortable="true" data-filter-control="select" data-filter-strict-search="true">Pool(s)</th>
                <th class="align-top" data-field="Algorithms" data-sortable="true" data-filter-control="select" data-filter-strict-search="true">Algorithm(s)</th>
                <th class="align-top" data-field="Accounts" data-sortable="true" data-filter-control="select" data-filter-strict-search="true">Account(s)</th>
                <th class="align-top" data-field="Duration" data-sortable="true" data-filter-strict-search="false" data-title-tooltip="format: [hr:min:sec]">Running Time<br>(hh:mm:ss)</th>
                <th class="align-top" data-field="DeviceNames" data-sortable="true" data-filter-control="select" data-filter-strict-search="false">Device(s)</th>
                <th class="align-top" data-field="Type" data-sortable="true" data-filter-control="select" data-filter-strict-search="false" data-visible="false">Type</th>
                <th class="align-top" data-field="CommandLine" data-sortable="true" data-filter-control="input" data-filter-strict-search="false">CommandLine</th>
                <th class="align-top" data-field="Reason" data-sortable="true" data-filter-control="input" data-filter-strict-search="false">Failure Reason</th>
                <th class="align-top" data-field="Profit" data-align="right" data-sortable="true" data-formatter="formatDigitsFromBTC" data-title-tooltip = "per 24hrs (estimated)" data-visible="false">Profit</th>
                <th class="align-top" data-field="Earning" data-align="right" data-sortable="true" data-formatter="formatDigitsFromBTC" data-title-tooltip = "per 24hrs (estimated)" data-visible="false">Earning</th>
                <th class="align-top" data-field="Profit_Bias" data-align="right" data-sortable="true" data-formatter="formatDigitsFromBTC" data-title-tooltip = "per 24hrs (estimated)" data-visible="false">Profit Bias</th>
                <th class="align-top" data-field="Earning_Bias" data-align="right" data-sortable="true" data-formatter="formatDigitsFromBTC" data-title-tooltip = "per 24hrs (estimated)" data-visible="false">Earning Bias</th>
                <th class="align-top" data-field="Benchmark" data-sortable="true" data-filter-control="select" data-filter-strict-search="false" data-visible="false">Benchmark</th>
                <th class="align-top" data-field="MeasurePowerUsage" data-sortable="true" data-filter-control="select" data-filter-strict-search="false" data-visible="false">Measure<br>Power Usage</th>
              </tr>
            </thead>
          </table>
<!-- Start of page scripts 'switchinglog.html' -->
          <script type="text/javascript">
            var $table = $('#switchinglog');

            function formatData(data) {
              $.each(data, function(index, item) {
                // Format the action
                item.tAction = item.Action;
              });
              return data;
            }

            $table.bootstrapTable({
              onPostBody: function() {
                if (config.WebGUIUseColor == true) {
                  $('#switchinglog td:nth-child(2)').each(function () {
                    switch(this.innerText) {
                      case this.innerText.match('Launched')?.input:
                        $(this).parent('tr').addClass('miner-running');
                        break;
                      case this.innerText.match('Stopped')?.input:
                        $(this).parent('tr').addClass('miner-idle');
                        break;
                      case this.innerText.match('Failed')?.input:
                        $(this).parent('tr').addClass('miner-failed');
                        break;
                    };
                  });
                };
              },

              autoRefreshInterval: (parseInt(config.Interval / 2)), // refresh once per interval
              height: $(window).height() - $table.offset().top + 5
            });

            $(document).ready(function () {
              $('#btn-clear-log').click(function () {
                $command = '/functions/switchinglog/clear';
                $('.modal-body').load($command, function() {
                  $('.modal-title').text($('#btn-clear-log').text());
                  $('#myModal').modal({show:true});
                });
                $('#myModal').on('hidden.bs.modal', function () {
                  $('#switchinglog').bootstrapTable('refresh');
                });
              });
            });
          </script>
<!-- End of page scripts 'switchinglog.html' -->
<!--#include file="/parts/foot.html" -->